<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <meta charset="utf-8"/>
	<title>iLog Ignition Access log search</title>
        <link rel="stylesheet" type="text/css" href="./bootstrap-3.3.7-dist/css/bootstrap.min.css">
        <link rel="stylesheet" type="text/css" href="./css/dataTables.bootstrap.css">
	<link rel="stylesheet" type="text/css" href="./css/buttons.dataTables.min.css">
        <link rel="stylesheet" type="text/css" href="./css/style_ilog_syslog.css">
        <script type="text/javascript" src="./js/jquery-1.12.4.js"> </script>
        <script type="text/javascript" src="./js/jquery.dataTables.js"> </script>
        <script type="text/javascript" src="./js/dataTables.bootstrap.js"> </script>
        <script type="text/javascript" src="./js/dataTables.colReorder.min.js"> </script>
        <script type="text/javascript" src="./js/dataTables.buttons.min.js"> </script>
        <script type="text/javascript" src="./js/buttons.colVis.min.js"> </script>
        <script type="text/javascript" src="./mark.js/jquery.mark.js"> </script>
        <script type="text/javascript" src="./js/datatables.mark.js"> </script>
	<script type="text/javascript" class="init">
            $(document).ready(function() {
                $('#example').DataTable( {
                    processing: true,
                    serverSide: true,
                    ajax: "./scripts/ilog_ignition_catId_10.php",
                    mark: true,
                    LengthMenu: [[50, 100, 250, 500, 1000], [50, 100, 250, 500, 1000]],
                    order: [[ 0, 'desc' ]],
                    search: { "regex": true },
                    stateSave: true,
                    colReorder: true,
                   //dom: "<'row'<'col-sm-6'l><'col-sm-6'f>>" + "<'row'<'col-sm-12'tr>>" + "<'row'<'col-sm-5'i><'col-sm-7'p>>",
                    dom: "<'row'<'col-sm-6'Bi>>" + "<'row'<'col-sm-6'l><'col-sm-6'p>>" + "<'row'<'col-sm-12'tr>>" + "<'row'<'col-sm-5'i><'col-sm-7'p>>",
                    columns: [  
                        { "visible": true }, 
                        { "visible": true }, 
                        { "visible": true }, 
                        { "visible": false }, 
                        { "visible": false }, 
                        { "visible": false }, 
                        { "visible": true }, 
                        { "visible": true }, 
                        { "visible": false }, 
                        { "visible": true }, 
                        { "visible": true }, 
                        { "visible": true }, 
                        { "visible": true }, 
                        { "visible": true }, 
                        { "visible": false }, 
                        { "visible": false }, 
                        { "visible": false }, 
                        { "visible": true }, 
                        { "visible": true }, 
                        { "visible": false }
                    ],
                       "columnDefs": [ {
                       "targets": [ 5, 10 ],
                       "createdCell": function (td, cellData, rowData, row, col) {
                            var reauth = new RegExp("Authenticated|Allow");
                            if (reauth.test(cellData)) {
                                $(td).css('color', 'green')
                                $(td).css('font-weight', 'bold')
                            }
                            var refail = new RegExp("[Ff]ailed");
                            if (refail.test(cellData)) {
                                $(td).css('color', 'red')
                                $(td).css('font-weight', 'bold')
                            }
                       }
                    } ],
                    buttons: [
                        {
                            extend: 'colvis',
                            text: 'Display Columns',
                            columns: ':not(.noVis)'
                        }
                    ]
                } );
                // Filter on Enter
                $('input.global_filter').on('keydown', function (e) {
                    var key = e.which;
                    switch (key) {
                    case 13: // enter
                        $('#example').DataTable().search( $('#global_filter').val()).draw();
                        localStorage.setItem("globalfilter", $('#global_filter').val());
                        break;
                    default:
                        break;
                } });
                $('#btnReset').on('click', function () { 
                    //resetGlobal(); 
                    localStorage.removeItem("globalfilter");
                    $("#global_filter").val("");
                    $('#example').DataTable().search( '' ).draw();
                    $("#global_filter").focus();
                });
           if("globalfilter" in localStorage){
               $('#global_filter').val(localStorage.getItem("globalfilter"));
               $('#example').DataTable().search( $('#global_filter').val()).draw();
            } 
            $("#global_filter").focus(); 
            } );
        </script>
    </head>
<body id="body">
    <div class="container-fluid">
        <table class="table1">
            <tbody>
                <tr> 
                    <td><img src="/images/stepcg_logo.png" width="80px" alt="STEPcg log"></td>
                    <td>iLog Ignition Access log search</td> 
                </tr>
            </tbody>
        </table>
         <table class="table2">
                <tbody>
                    <tr>
                        <td>
<div class="input-group input-group-xs col-md-16">
    <input type="text" class="form-control global_filter" id="global_filter" placeholder="Global Search" />
    <span class="input-group-btn">
        <button class="btn btn-danger btnReset" type="button" id="btnReset" >
            <i class="glyphicon glyphicon-remove"></i>
        </button>
    </span>
</div>
                        </td>
                </tr>
            </tbody>
        </table>
         <table class="table table-striped table-bordered table-hover table-condensed" id="example" style="width:100%">
             <thead>
                 <tr>
                 <th>seq</th>
                 <th>Id</th>
                 <th>datetime&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
                 <th>host</th>
                 <th>AuthServerName</th>
                 <th>AuthenticationDecision</th>
                 <th>AuthenticatorIp</th>
                 <th>AuthenticatorName</th>
                 <th>AuthenticatorType</th>
                 <th>UserNameAttr</th>
                 <th>AuthorizationDecision</th>
                 <th>AuthorizationRuleIds</th>
                 <th>CallingStationIdAttr</th>
                 <th>AuthProtocol</th>
                 <th>Description</th>
                 <th>DirectoryServiceName</th>
                 <th>NASIPAddrAttr</th>
                 <th>ProvisioningValues</th>
                 <th>ServiceCatName</th>
                 <th>UserId</th>
             </tr>
         </thead>
     </table>
    </div>
</body>
</html>
